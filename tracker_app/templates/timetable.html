<div class="dropdown-menu dropdown-menu-sm" id="context-menu{{idx}}">
    <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <a class="dropdown-item" href="#">Something else here</a>
</div>



{% if active_member is None %}
<!-- Display for Group -->
    <div class="row  justify-content-center group-content">
        <table>
            <tbody>
                <tr>
                    <th>
                        <!-- Add Member Button-->
                        {% if is_owner %}
                            <a class = "ml-2" href="/addmember/{{ group.pk }}/" style="color: white;">
                                <i class="fa fa-plus-circle" style="color: white; font-size: 150%; vertical-align: bottom;"></i>
                            </a>
                        {% endif %}

                        <span style="padding-left: 8px;">Name</span>
                    </th>
                    <th>Role/s</th>
        
                    {% for t in tasks %}
                        <th>{{ t.categoryName }}</th>
                    {% endfor %}
                </tr>
        
            {% for m in members %}
                <tr {% if is_owner %} style='cursor: pointer; cursor: hand;' onclick="window.location='/dashboard/{{ group.pk }}/{{ m.member.pk }}/';"{% endif %}>
                    
                    {% if request.user == m.member.person %}
                        <td class="selected-mem">{{ m.prettyname }}</td>
                        <td id="member-roles{{idx}}">{{ m.prettyroles }}</td>
                    {% else %}
                        <td>{{ m.prettyname }}</td>
                        <td>{{ m.prettyroles }}</td>
                    {% endif %}
        
                    {% for t in m.tasks %}
                        {% if m.visible %}
                            <td>{{ t.totaltime }}</td>
                        {% else %}
                            <td>-</td>
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>


{% else %}
<!-- Display for Specific member (active_member) -->
    <div class="row  justify-content-center">
        <h5>{{ active_member.person.get_full_name }}</h5>
    </div>    

    <div class="row  justify-content-center" style="margin-bottom: 2vh;">
        <a href="/dashboard/{{ group.pk }}/">Back to Group</a>
    </div>



    <div class="row  justify-content-center group-content">
        <table>
            <tbody>
                <tr>
                    <th>Name</th>
                    <th>Role/s</th>
        
                    {% for t in tasks %}
                        <th>{{ t.categoryName }}</th>
                    {% endfor %}
                </tr>
            {% for m in members %}

                {% if active_member == m.member %}
                    <tr>
                        <td class="selected-mem">{{ m.prettyname }}</td>
                        <td {% if request.user == m.member.person %} id="member-roles{{idx}}" {% endif %}>{{ m.prettyroles }}</td>
            
                        {% for t in m.tasks %}
                            <td>{{ t.totaltime }}</td>
                        {% endfor %}
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endif %}

<script>
    $('#member-roles{{idx}}').on('contextmenu', function(e) {
      var top = e.pageY - 10;
      var left = e.pageX - 90;
      $("#context-menu{{idx}}").css({
        display: "block",
        top: top,
        left: left,
        position: "fixed"
      }).addClass("show");
      return false; //blocks default Webbrowser right click menu
    }).on("click", function() {
      $("#context-menu{{idx}}").removeClass("show").hide();
    });
    
    $("#context-menu{{idx}} a").on("click", function() {
      $(this).parent().removeClass("show").hide();
    });
    </script>